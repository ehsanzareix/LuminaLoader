import{v as D}from"./v4-CtRu48qb.js";import{j as V}from"./jsx-runtime-D_zvdyIk.js";import{r as h}from"./index-BO0P4Y5I.js";const{addons:K}=__STORYBOOK_MODULE_PREVIEW_API__,{ImplicitActionsDuringRendering:B}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__,{global:_}=__STORYBOOK_MODULE_GLOBAL__;var j=Object.defineProperty,W=(a,e)=>{for(var t in e)j(a,t,{get:e[t],enumerable:!0})},F="storybook/actions",Q=`${F}/action-event`,Y={depth:10,clearOnStoryChange:!0,limit:50},$=(a,e)=>{let t=Object.getPrototypeOf(a);return!t||e(t)?t:$(t,e)},G=a=>!!(typeof a=="object"&&a&&$(a,e=>/^Synthetic(?:Base)?Event$/.test(e.constructor.name))&&typeof a.persist=="function"),U=a=>{if(G(a)){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let t=Object.getOwnPropertyDescriptor(e,"view"),r=t==null?void 0:t.value;return typeof r=="object"&&(r==null?void 0:r.constructor.name)==="Window"&&Object.defineProperty(e,"view",{...t,value:Object.create(r.constructor.prototype)}),e}return a},J=()=>typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?D():Date.now().toString(36)+Math.random().toString(36).substring(2);function u(a,e={}){let t={...Y,...e},r=function(...s){var d,v;if(e.implicit){let w=(d="__STORYBOOK_PREVIEW__"in _?_.__STORYBOOK_PREVIEW__:void 0)==null?void 0:d.storyRenders.find(p=>p.phase==="playing"||p.phase==="rendering");if(w){let p=!((v=globalThis==null?void 0:globalThis.FEATURES)!=null&&v.disallowImplicitActionsInRenderV8),L=new B({phase:w.phase,name:a,deprecated:p});if(p)console.warn(L);else throw L}}let i=K.getChannel(),n=J(),l=5,o=s.map(U),m=s.length>1?o:o[0],c={id:n,count:0,data:{name:a,args:m},options:{...t,maxDepth:l+(t.depth||3),allowFunction:t.allowFunction||!1}};i.emit(Q,c)};return r.isAction=!0,r.implicit=e.implicit,r}const{definePreview:ce}=__STORYBOOK_MODULE_PREVIEW_API__,{global:E}=__STORYBOOK_MODULE_GLOBAL__;var Z={};W(Z,{argsEnhancers:()=>te,loaders:()=>se});var q=(a,e)=>typeof e[a]>"u"&&!(a in e),X=a=>{let{initialArgs:e,argTypes:t,id:r,parameters:{actions:s}}=a;if(!s||s.disable||!s.argTypesRegex||!t)return{};let i=new RegExp(s.argTypesRegex);return Object.entries(t).filter(([n])=>!!i.test(n)).reduce((n,[l,o])=>(q(l,e)&&(n[l]=u(l,{implicit:!0,id:r})),n),{})},ee=a=>{let{initialArgs:e,argTypes:t,parameters:{actions:r}}=a;return r!=null&&r.disable||!t?{}:Object.entries(t).filter(([s,i])=>!!i.action).reduce((s,[i,n])=>(q(i,e)&&(s[i]=u(typeof n.action=="string"?n.action:i)),s),{})},te=[ee,X],A=!1,re=a=>{let{parameters:{actions:e}}=a;if(!(e!=null&&e.disable)&&!A&&"__STORYBOOK_TEST_ON_MOCK_CALL__"in E&&typeof E.__STORYBOOK_TEST_ON_MOCK_CALL__=="function"){let t=E.__STORYBOOK_TEST_ON_MOCK_CALL__;t((r,s)=>{let i=r.getMockName();i!=="spy"&&(!/^next\/.*::/.test(i)||["next/router::useRouter()","next/navigation::useRouter()","next/navigation::redirect","next/cache::","next/headers::cookies().set","next/headers::cookies().delete","next/headers::headers().set","next/headers::headers().delete"].some(n=>i.startsWith(n)))&&u(i)(s)}),A=!0}},se=[re];class ie{constructor(e={}){this.opts=e,this.container=null,this.progressValue=null,this.indeterminate=!1,this.progressEl=null,this.overlayEl=null,this.backdropEl=null,this.prevActiveElement=null,this.onKeydownHandler=t=>this.handleKeydown(t),this.themeMediaQuery=null,this.themeListener=null,this.currentTheme=null,typeof e.progress=="number"&&(this.progressValue=Math.max(0,Math.min(100,e.progress)),this.indeterminate=!1),this.applyTheme()}createDotsLoader(){const e=document.createElement("div");e.className="lumina-dots-wrapper";for(let t=0;t<3;t++){const r=document.createElement("div");r.className="lumina-dot",r.style.animationDelay=`${t*.15}s`,e.appendChild(r)}return e}createBarsLoader(){const e=document.createElement("div");e.className="lumina-bars-wrapper";for(let t=0;t<5;t++){const r=document.createElement("div");r.className="lumina-bar",r.style.animationDelay=`${t*.1}s`,e.appendChild(r)}return e}createPulseLoader(){const e=document.createElement("div");e.className="lumina-pulse-wrapper";for(let t=0;t<3;t++){const r=document.createElement("div");r.className="lumina-pulse-ring",r.style.animationDelay=`${t*.4}s`,e.appendChild(r)}return e}createGradientRingLoader(){const e=document.createElement("div");return e.className="lumina-gradient-ring",e}createOrbitLoader(){const e=document.createElement("div");e.className="lumina-orbit-wrapper";for(let t=0;t<3;t++){const r=document.createElement("div");r.className="lumina-orbit",r.style.animationDelay=`${t*.4}s`;const s=document.createElement("div");s.className="lumina-planet",r.appendChild(s),e.appendChild(r)}return e}createWaveLoader(){const e=document.createElement("div");e.className="lumina-wave-wrapper";for(let t=0;t<5;t++){const r=document.createElement("div");r.className="lumina-wave",r.style.animationDelay=`${t*.1}s`,e.appendChild(r)}return e}createImageElement(){const e=document.createElement("div");e.className="lumina-image-wrapper";const t=this.opts.size?`width:${this.opts.size}px;height:${this.opts.size}px;`:"";if(typeof this.opts.image=="string"){const r=document.createElement("img");r.className="lumina-image",r.src=this.opts.image,r.alt=this.opts.ariaLabel||"loading",r.setAttribute("style",`max-width:100%;max-height:100%;${t}`),e.appendChild(r)}else if(this.opts.image instanceof SVGElement){const r=this.opts.image.cloneNode(!0);r.classList.add("lumina-image"),this.opts.size&&(r.setAttribute("width",String(this.opts.size)),r.setAttribute("height",String(this.opts.size))),e.appendChild(r)}return this.opts.imageAnimation&&e.classList.add(`lumina-${this.opts.imageAnimation}`),e}renderProgress(e){const t=this.opts.progressVariant||"linear",r=document.createElement("div");if(r.className=`lumina-progress lumina-progress-${t}`,r.setAttribute("role","progressbar"),r.setAttribute("aria-valuemin","0"),r.setAttribute("aria-valuemax","100"),t==="linear"){const s=document.createElement("div");s.className="lumina-progress-track";const i=document.createElement("div");i.className="lumina-progress-bar",this.progressValue!==null?(i.style.width=`${this.progressValue}%`,i.setAttribute("aria-valuenow",String(this.progressValue))):this.indeterminate&&i.classList.add("lumina-indeterminate"),s.appendChild(i),r.appendChild(s),this.progressEl=i}else{const s=this.opts.size||80,i="http://www.w3.org/2000/svg",n=document.createElementNS(i,"svg");n.setAttribute("viewBox","0 0 100 100"),n.setAttribute("width",String(s)),n.setAttribute("height",String(s)),n.classList.add("lumina-progress-circular");const l=document.createElementNS(i,"circle");l.setAttribute("cx","50"),l.setAttribute("cy","50"),l.setAttribute("r","45"),l.setAttribute("class","lumina-progress-bg"),n.appendChild(l);const o=document.createElementNS(i,"circle");o.setAttribute("cx","50"),o.setAttribute("cy","50"),o.setAttribute("r","45"),o.setAttribute("class","lumina-progress-circle");const m=2*Math.PI*45;o.setAttribute("stroke-dasharray",String(m));const c=this.progressValue!==null?(100-this.progressValue)/100*m:m;o.setAttribute("stroke-dashoffset",String(c)),this.progressValue!==null&&o.setAttribute("aria-valuenow",String(this.progressValue)),n.appendChild(o),r.appendChild(n),this.progressEl=o}e.appendChild(r)}createOverlay(e){const t=document.createElement("div");t.className="lumina-overlay",t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.tabIndex=-1;const r=document.createElement("div");r.className="lumina-backdrop";const s=this.opts.backdrop||{},i=typeof s.opacity=="number"?s.opacity:.5,n=s.color||"rgba(0, 0, 0, 0.8)",l=s.blur?`backdrop-filter: blur(${s.blur});-webkit-backdrop-filter: blur(${s.blur});`:"backdrop-filter: blur(8px);-webkit-backdrop-filter: blur(8px);";r.setAttribute("style",`background:${n};opacity:${i};${l}`),s.clickToClose&&r.addEventListener("click",()=>this.hide()),t.appendChild(r);const o=this.opts.overlayZIndex??1e3,m=t.getAttribute("style")||"";t.setAttribute("style",`${m};z-index:${o}`);const c=this.resolveTheme();c&&t.setAttribute("data-lumina-theme",c);let d=null;try{typeof document<"u"&&document.body&&(d=document.body)}catch{}!d&&e instanceof HTMLElement&&(d=e),!d&&this.hasAppendChild(e)&&(d=e),d&&typeof d.appendChild=="function"?d.appendChild(t):typeof document<"u"&&document.body?document.body.appendChild(t):console.warn("LuminaLoader: unable to mount overlay — no valid mount root found."),this.overlayEl=t,this.backdropEl=r,(this.opts.theme??"auto")==="auto"&&this.watchTheme()}handleKeydown(e){if(this.overlayEl)if(e.key==="Tab"){const t=this.overlayEl.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])');if(!t.length)return;const r=t[0],s=t[t.length-1];e.shiftKey&&document.activeElement===r?(e.preventDefault(),s.focus()):!e.shiftKey&&document.activeElement===s&&(e.preventDefault(),r.focus())}else e.key==="Escape"&&this.hide()}trapFocus(){if(!this.overlayEl)return;this.prevActiveElement=document.activeElement;const e=this.overlayEl.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])');e.length?e[0].focus():this.overlayEl.focus(),document.addEventListener("keydown",this.onKeydownHandler),(this.opts.theme??"auto")==="auto"&&this.applyThemeToElement(this.overlayEl)}applyThemeToElement(e){if(!e)return;const t=this.resolveTheme();t?e.setAttribute("data-lumina-theme",t):e.removeAttribute("data-lumina-theme")}resolveTheme(){const e=this.opts.theme??"auto";if(e==="light"||e==="dark")return e;if(typeof window<"u"&&typeof window.matchMedia=="function")try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch{return"light"}return"light"}watchTheme(){if(!(typeof window>"u"||!("matchMedia"in window)))try{this.themeMediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.themeListener=t=>{this.currentTheme=t.matches?"dark":"light",this.applyThemeToElement(this.overlayEl)};const e=this.themeMediaQuery;e&&("addEventListener"in e?e.addEventListener("change",this.themeListener):"addListener"in e&&e.addListener(this.themeListener))}catch{this.themeMediaQuery=null,this.themeListener=null}}hasAppendChild(e){return typeof e=="object"&&e!==null&&"appendChild"in e&&typeof e.appendChild=="function"}applyTheme(){const e=this.opts.theme??"auto";if(e==="light"||e==="dark"){this.currentTheme=e,this.applyThemeToElement(this.overlayEl||this.container);return}if(typeof window<"u"&&"matchMedia"in window)try{const t=window.matchMedia("(prefers-color-scheme: dark)");this.currentTheme=t.matches?"dark":"light"}catch{this.currentTheme="light"}else this.currentTheme="light";this.applyThemeToElement(this.overlayEl||this.container)}releaseFocus(){if(document.removeEventListener("keydown",this.onKeydownHandler),this.prevActiveElement instanceof HTMLElement&&this.prevActiveElement.focus(),this.prevActiveElement=null,this.themeMediaQuery&&this.themeListener){try{"removeEventListener"in this.themeMediaQuery?this.themeMediaQuery.removeEventListener("change",this.themeListener):"removeListener"in this.themeMediaQuery&&this.themeMediaQuery.removeListener(this.themeListener)}catch{}this.themeListener=null,this.themeMediaQuery=null}}mount(){if(this.container)return;const e=typeof this.opts.target=="string"?document.querySelector(this.opts.target):this.opts.target??document.body,t=document.createElement("div");if(t.className="lumina-root",t.setAttribute("aria-hidden","true"),this.opts.overlay){this.createOverlay(e);const r=document.createElement("div");r.className="lumina-overlay-content";let s;const i=this.opts.type||"spinner";if(i==="image"&&this.opts.image?s=this.createImageElement():i==="progress"?(this.renderProgress(r),s=r.querySelector(".lumina-progress")):i==="dots"?s=this.createDotsLoader():i==="bars"?s=this.createBarsLoader():i==="pulse"?s=this.createPulseLoader():i==="gradient-ring"?s=this.createGradientRingLoader():i==="orbit"?s=this.createOrbitLoader():i==="wave"?s=this.createWaveLoader():(s=document.createElement("div"),s.className="lumina-spinner"),i!=="progress"){const n=document.createElement("div");n.className=`lumina-loader lumina-${i}`,n.appendChild(s),r.appendChild(n)}if(this.opts.text){const n=document.createElement("div");n.className="lumina-text",n.textContent=this.opts.text,r.appendChild(n)}this.overlayEl&&this.overlayEl.appendChild(r),this.container=this.overlayEl}else{const r=this.opts.type||"spinner";let s;if(r==="image"&&this.opts.image?s=this.createImageElement():r==="progress"?(this.renderProgress(t),s=t.querySelector(".lumina-progress")):r==="dots"?s=this.createDotsLoader():r==="bars"?s=this.createBarsLoader():r==="pulse"?s=this.createPulseLoader():r==="gradient-ring"?s=this.createGradientRingLoader():r==="orbit"?s=this.createOrbitLoader():r==="wave"?s=this.createWaveLoader():(s=document.createElement("div"),s.className="lumina-spinner"),r!=="progress"){const n=document.createElement("div");n.className=`lumina-loader lumina-${r}`,n.appendChild(s),t.appendChild(n)}typeof this.opts.size=="number"&&t.style.setProperty("--lumina-size",`${this.opts.size}px`),typeof this.opts.color=="string"&&t.style.setProperty("--lumina-color",this.opts.color),typeof this.opts.speed=="number"&&t.style.setProperty("--lumina-spin-speed",`${this.opts.speed}s`);let i=null;try{if(typeof this.opts.target=="string"){const n=document.querySelector(this.opts.target);n instanceof HTMLElement&&(i=n)}else this.opts.target instanceof HTMLElement&&(i=this.opts.target)}catch{}!i&&typeof document<"u"&&document.body&&(i=document.body),i&&this.hasAppendChild(i)?i.appendChild(t):typeof document<"u"&&document.body?document.body.appendChild(t):console.warn("LuminaLoader: unable to mount loader — no valid mount root found."),this.container=t}}show(){var e;if(this.container||this.mount(),(e=this.container)==null||e.setAttribute("aria-hidden","false"),this.overlayEl){const t=typeof this.opts.target=="string"?document.querySelector(this.opts.target):this.opts.target??document.body;t instanceof HTMLElement&&t.setAttribute("aria-busy","true");const r=this.overlayEl.querySelector(".lumina-overlay-content");r instanceof HTMLElement&&(typeof this.opts.size=="number"&&r.style.setProperty("--lumina-size",`${this.opts.size}px`),typeof this.opts.color=="string"&&r.style.setProperty("--lumina-color",this.opts.color),typeof this.opts.speed=="number"&&r.style.setProperty("--lumina-spin-speed",`${this.opts.speed}s`)),this.trapFocus()}}hide(){var e;if((e=this.container)==null||e.setAttribute("aria-hidden","true"),this.overlayEl){const t=typeof this.opts.target=="string"?document.querySelector(this.opts.target):this.opts.target??document.body;t instanceof HTMLElement&&t.removeAttribute("aria-busy"),this.releaseFocus(),this.overlayEl.remove(),this.overlayEl=null,this.backdropEl=null,this.container=null}}setProgress(e){const t=Math.max(0,Math.min(100,Math.round(e)));if(this.progressValue=t,this.indeterminate=!1,!this.container)return;const r=this.container.querySelector('[role="progressbar"]');if(r)if(r.classList.contains("lumina-progress-linear")||r.querySelector(".lumina-progress-bar")){const s=r.querySelector(".lumina-progress-bar");s&&(s.style.width=`${t}%`,s.setAttribute("aria-valuenow",String(t)),s.classList.remove("lumina-indeterminate"))}else{const s=r.querySelector(".lumina-progress-circle");if(s){const i=Number(s.getAttribute("stroke-dasharray"))||2*Math.PI*45,n=(100-t)/100*i;s.setAttribute("stroke-dashoffset",String(n)),s.setAttribute("aria-valuenow",String(t))}}}setIndeterminate(e=!0){if(this.indeterminate=e,this.progressValue=null,!this.container)return;const t=this.container.querySelector('[role="progressbar"]');if(!t)return;const r=t.querySelector(".lumina-progress-bar");r&&(e?r.classList.add("lumina-indeterminate"):r.classList.remove("lumina-indeterminate"))}destroy(){var e;this.overlayEl&&(this.overlayEl.remove(),this.overlayEl=null,this.backdropEl=null),this.releaseFocus(),(e=this.container)==null||e.remove(),this.container=null}}function ne(a){const e=new ie(a);return e.mount(),e}const I=({show:a=!0,container:e,onShow:t,onHide:r,...s})=>{const i=h.useRef(null),n=h.useRef(null),l=h.useMemo(()=>JSON.stringify(s),[s]);return h.useEffect(()=>{let o=null;if(e)if(typeof e=="string"){const c=document.querySelector(e);o=c instanceof HTMLElement?c:null}else o=e;else o=i.current;const m=s.overlay&&!e?document.body:o??document.body;return n.current=ne({...s,target:m}),a&&(n.current.show(),t==null||t()),()=>{var c;(c=n.current)==null||c.destroy(),n.current=null}},[e,l]),h.useEffect(()=>{n.current&&(a?(n.current.show(),t==null||t()):(n.current.hide(),r==null||r()))},[a,t,r]),s.overlay?null:V.jsx("div",{ref:i,className:"lumina-loader-host"})};I.__docgenInfo={description:"",methods:[],displayName:"LuminaLoaderReact",props:{show:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},container:{required:!1,tsType:{name:"union",raw:"HTMLElement | string",elements:[{name:"HTMLElement"},{name:"string"}]},description:""},onShow:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onHide:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const de={title:"Adapters/React/LuminaLoader",component:I,args:{theme:"auto"},argTypes:{onShow:{table:{disable:!0}},onHide:{table:{disable:!0}},theme:{control:{type:"radio",options:["auto","light","dark"]},description:"Theme to apply (auto adapts to prefers-color-scheme)"}}},f={args:{type:"spinner",show:!0,size:48,speed:1,onShow:u("onShow"),onHide:u("onHide")},argTypes:{size:{control:{type:"range",min:16,max:200}},speed:{control:{type:"number",min:.2,max:5,step:.1}},color:{control:"color"}}},g={args:{type:"image",image:'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80"><rect width="100%" height="100%" fill="%23f3f4f6"/><circle cx="40" cy="40" r="24" fill="%234fa94d"/></svg>',imageAnimation:"rotate",size:80,show:!0,onShow:u("onShow"),onHide:u("onHide")}},y={args:{type:"progress",progressVariant:"linear",progress:45,size:200,show:!0,onShow:u("onShow"),onHide:u("onHide")}},b={args:{type:"spinner",overlay:!0,backdrop:{opacity:.5},show:!0,onShow:u("onShow"),onHide:u("onHide")}};var T,O,S;f.parameters={...f.parameters,docs:{...(T=f.parameters)==null?void 0:T.docs,source:{originalSource:`{
  args: {
    type: 'spinner',
    show: true,
    size: 48,
    speed: 1,
    onShow: action('onShow'),
    onHide: action('onHide')
  },
  argTypes: {
    size: {
      control: {
        type: 'range',
        min: 16,
        max: 200
      }
    },
    speed: {
      control: {
        type: 'number',
        min: 0.2,
        max: 5,
        step: 0.1
      }
    },
    color: {
      control: 'color'
    }
  }
}`,...(S=(O=f.parameters)==null?void 0:O.docs)==null?void 0:S.source}}};var x,R,C;g.parameters={...g.parameters,docs:{...(x=g.parameters)==null?void 0:x.docs,source:{originalSource:`{
  args: {
    type: 'image',
    image: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80"><rect width="100%" height="100%" fill="%23f3f4f6"/><circle cx="40" cy="40" r="24" fill="%234fa94d"/></svg>',
    imageAnimation: 'rotate',
    size: 80,
    show: true,
    onShow: action('onShow'),
    onHide: action('onHide')
  }
}`,...(C=(R=g.parameters)==null?void 0:R.docs)==null?void 0:C.source}}};var M,k,N;y.parameters={...y.parameters,docs:{...(M=y.parameters)==null?void 0:M.docs,source:{originalSource:`{
  args: {
    type: 'progress',
    progressVariant: 'linear',
    progress: 45,
    size: 200,
    show: true,
    onShow: action('onShow'),
    onHide: action('onHide')
  }
}`,...(N=(k=y.parameters)==null?void 0:k.docs)==null?void 0:N.source}}};var P,z,H;b.parameters={...b.parameters,docs:{...(P=b.parameters)==null?void 0:P.docs,source:{originalSource:`{
  args: {
    type: 'spinner',
    overlay: true,
    backdrop: {
      opacity: 0.5
    },
    show: true,
    onShow: action('onShow'),
    onHide: action('onHide')
  }
}`,...(H=(z=b.parameters)==null?void 0:z.docs)==null?void 0:H.source}}};const ue=["Spinner","ImageRotate","ProgressLinear","Overlay"];export{g as ImageRotate,b as Overlay,y as ProgressLinear,f as Spinner,ue as __namedExportsOrder,de as default};
